=== 修正ファイルリスト（2025年9月19日 v2） ===

【今回修正されたファイル（デプロイ必須）】
1. metaApi.js
2. dynamicAlertGenerator.js
3. utils/multiUserChatworkSender.js

修正内容の詳細:

【1. metaApi.js】
- 新規追加: fetchMetaDataWithStoredConfig関数（576-614行目）
  ユーザー設定からMeta APIデータを取得する関数を追加
- 修正: fetchMetaAdDailyStats関数のパラメータ処理（395-404行目）
  app_idパラメータをオプショナルに変更
- module.exportsにfetchMetaDataWithStoredConfigを追加（621-626行目）

【2. dynamicAlertGenerator.js】
- 修正: formatValue関数（42-63行目）
  数値を適切な桁数に丸める処理を追加
  - CTR/CVR/予算消化率: 小数点第1位まで（例: 0.899888 → 0.9）
  - CPA/CPM/CPC: 整数に丸めてカンマ区切り（例: 1926.884 → 1,927）
- 修正: generateDynamicAlerts関数（202-238行目）
  保存する値も適切に丸めるロジックを追加
  アラート履歴保存処理を追加（220-226行目）
- 新規追加: saveAlertsToHistory関数（403-447行目）
  アラートを履歴ファイルに保存する処理を実装

【3. utils/multiUserChatworkSender.js】
- 修正: formatValue関数（156-175行目）
  チャットワーク送信時の数値フォーマットを修正
  数値を適切な桁数に丸める処理を追加
- 修正: 日次レポートのメッセージ生成（66-78行目）
  各指標の数値を適切に丸める処理を追加

実装結果:
✅ Meta APIから実際の広告データを取得
✅ 数値の適切な表示
  - CTR: 0.996678 → 1.0%
  - CPM: 1928.017719 → 1,928円
  - 予算消化率: 62.178571 → 62.2%
✅ アラート履歴の自動保存
✅ チャットワーク通知も同様のフォーマット
✅ マルチユーザー対応（userIdで分離管理）

テスト済み環境:
- ローカル: http://localhost:3000
- ユーザー: komiya11122@gmail.com (ID: b4475ace-303e-4fd1-8740-221154c9b291)
- Meta Account ID: act_1165556408678089
- 生成されたアラート: CTR、CPM、CV、予算消化率の4件

デプロイ時の注意:
1. 3つのファイル全てを更新すること
2. alert_history.jsonの書き込み権限を確認
3. ユーザー設定ファイルのMeta APIトークンが最新であることを確認